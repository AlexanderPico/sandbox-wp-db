name: On Pull Request 1

on:
  workflow_dispatch:
  #pull_request:
  #  types: [opened, synchronize]

jobs:
  test_one:
    runs-on: ubuntu-latest
    steps:
    - name: Check out code
      uses: actions/checkout@v3
    
    - name: Get PR number
      run: |
        #echo "PR_NUMBER=${{ github.event.pull_request.number }}" >> $GITHUB_ENV
        echo "PR_NUMBER=4" >> $GITHUB_ENV #for testing

    - name: Edit PR description
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        echo "PR_NUMBER $PR_NUMBER"
        
        # Get the current PR description
        CURRENT_DESCRIPTION=$(gh pr view $PR_NUMBER --json body -q ".body")
        
        # Modify the description. For this example, let's just append some text.
        NEW_DESCRIPTION="$CURRENT_DESCRIPTION
        
        - [x] Test one"
        
        # Update the PR description with the modified content
        gh pr edit $PR_NUMBER --body "$NEW_DESCRIPTION"

  test_two:
    needs: test_one
    runs-on: ubuntu-latest
    steps:
    #- name: Check out code
    #  uses: actions/checkout@v3
    
    - name: Get PR number
      run: |
        #echo "PR_NUMBER=${{ github.event.pull_request.number }}" >> $GITHUB_ENV
        echo "PR_NUMBER=4" >> $GITHUB_ENV #for testing

    - name: Edit PR description
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        # Get the current PR description
        CURRENT_DESCRIPTION=$(gh pr view $PR_NUMBER --json body -q ".body")
        
        # Modify the description. For this example, let's just append some text.
        NEW_DESCRIPTION="$CURRENT_DESCRIPTION
        - [x] Test two"
        
        # Update the PR description with the modified content
        gh pr edit $PR_NUMBER --body "$NEW_DESCRIPTION"
